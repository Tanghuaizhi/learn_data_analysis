---
title: "lesson4_practice"
output: html_notebook
---

## Practice 1: 价格与x

Note:
In this problem set, you'll continue to explore the diamonds data set.
Your first task is to create a scatterplot of price vs x. using the ggplot syntax.

```{r}
getwd()
setwd("D:/learn_data_analysis/R basic/lesson4")

library(ggplot2)

data(diamonds)

names(diamonds)
head(diamonds)

ggplot(data = diamonds, aes(x = x, y = price)) +
  geom_point(alpha = 1/10)
```

## Practice 2: 发现 价格与X

### What are your observations about the scatterplot of price vs. x?
1、总体上，价格和长度存在明显的相关性，随着长度变化，价格指数型上升。
2、存在极其少量异常数据，长度（x）为零。
3、大部分长度数据集中在7以下，同时此部分的价格也较为集中，大部分在7500以内。
4、长度为6左右以下的的价格十分稳定，均不超过7500。
5、长度在7.5左右、8左右的钻石数量较为明显。

```{r}
ggplot(data = diamonds, aes(x = x, y = price)) +
  geom_point(alpha = 1/5) +
  coord_trans(y = "log2")

```

## Practice 3: 相关性

### what is the correlation between price and x?
0.88
### what is the correlation between price and y?
0.87
### what is the correlation between price and z?
0.86

```{r}
cor.test(diamonds$x, diamonds$price)
cor.test(diamonds$y, diamonds$price)
cor.test(diamonds$z, diamonds$price)
```

## Practice 4: 价格与深度

Create a simple scatter plot of price vs depth.

```{r}
ggplot(data = diamonds, aes(x = depth, y = price)) +
  geom_point(alpha = 1/5)

```

## Practice 5: 调整-价格与深度

Change the code to make the transparency of the points to be 1/100 of what they are now and mark the x-axis every 2 units. See the instructor notes for two hints.

```{r mark the x-axis every 2 units}
ggplot(data = diamonds, aes(x = depth, y = price)) +
  geom_point(alpha = 1/100) +
  scale_x_continuous(breaks = seq(0, 80, 2))

```


## Practice 6: 典型深度范围

### Based on the scatterplot of depth vs. price, most diamonds are between what values of depth?
58-64


## Practice 7: 相关性-价格与深度

### what the correlation of depth vs. price?
-0.01
### Based on the correlation coefficient would you use depth to predict the price of a diamond?
No
### Why?
相关性太低了，几乎没有关系，无法用来预测。

```{r}
cor.test(diamonds$depth, diamonds$price)
```


## Practice 8: 价格与克拉

Create a scatterplot of price vs carat and omit the top 1% of price and carat values.

```{r omit top 1%}
p1 <- ggplot(data = diamonds, aes(x = carat, y = price)) +
  geom_point(alpha = 1/100)

p2 <- ggplot(data = diamonds, aes(x = carat, y = price)) +
  geom_point(alpha = 1/100) +
  xlim(0, quantile(diamonds$carat, 0.99)) +
  ylim(0, quantile(diamonds$price, 0.99))

library(gridExtra)
grid.arrange(p1, p2, ncol =1)

```

## Practice 9: 价格与体积

Create a scatterplot of price vs. volume (x * y * z).
This is a very rough approximation for a diamond's volume.

Create a new variable for volume in the diamonds data frame.
This will be useful in a later exercise.

Don't make any adjustments to the plot just yet.

```{r}
diamonds$volume = with(diamonds, x * y * z)

ggplot(data = diamonds, aes(x = volume, y = price)) +
  geom_point(alpha = 1/100) +
  xlim(0, quantile(diamonds$volume, 0.99)) +
  ylim(0, quantile(diamonds$price, 0.99)) 
```

## Practice 10: 发现-价格与体积

### What are your observations from the price vs. volume sactterplot?
1、价格和体积相关性高，有较为明显的线性关系。
2、体积大部分在200以内。
3、价格大多在7500以内。
4、体积在160以下时，体积与价格相关性十分明显。
